paths:
  /products:
    get:
      summary: üìã Listar todos los productos
      description: |
        Obtiene una lista paginada de todos los productos en el inventario.
        
        ### Caracter√≠sticas
        - Paginaci√≥n autom√°tica
        - Filtrado por estado
        - Ordenamiento por diferentes campos
        - Respuesta optimizada para grandes vol√∫menes
        
        ### Permisos Requeridos
        - **ADMIN**: Acceso completo
        - **USER**: Acceso de lectura
        - **VIEWER**: Solo lectura
      tags:
        - Products
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          description: N√∫mero de p√°gina (comienza en 1)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
          example: 1
        - name: limit
          in: query
          description: N√∫mero de productos por p√°gina
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          example: 20
        - name: sort
          in: query
          description: Campo para ordenar (name, price, quantity, created_at)
          required: false
          schema:
            type: string
            enum: [name, price, quantity, created_at]
            default: created_at
          example: "name"
        - name: order
          in: query
          description: Orden de clasificaci√≥n
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
          example: "desc"
        - name: search
          in: query
          description: T√©rmino de b√∫squeda en nombre y descripci√≥n
          required: false
          schema:
            type: string
          example: "tornillo"
      responses:
        '200':
          description: ‚úÖ Lista de productos obtenida exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'
              example:
                success: true
                message: "Productos obtenidos exitosamente"
                data:
                  products:
                    - id: 1
                      name: "Tornillo M8x20"
                      description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal"
                      price: 0.50
                      quantity: 1000
                      created_at: "2024-01-15T10:30:00.000Z"
                      updated_at: "2024-01-15T10:30:00.000Z"
                    - id: 2
                      name: "Tuerca M8"
                      description: "Tuerca m√©trica 8mm hexagonal"
                      price: 0.25
                      quantity: 2000
                      created_at: "2024-01-15T10:30:00.000Z"
                      updated_at: "2024-01-15T10:30:00.000Z"
                  pagination:
                    page: 1
                    limit: 20
                    total: 2
                    totalPages: 1
                    hasNext: false
                    hasPrev: false
                timestamp: "2024-01-15T10:30:00.000Z"
        '401':
          description: ‚ùå No autorizado - Token requerido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "Token de autenticaci√≥n requerido"
                error: "UNAUTHORIZED"
                timestamp: "2024-01-15T10:30:00.000Z"
        '403':
          description: ‚ùå Acceso denegado - Permisos insuficientes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "No tienes permisos para acceder a este recurso"
                error: "FORBIDDEN"
                timestamp: "2024-01-15T10:30:00.000Z"

    post:
      summary: ‚ûï Crear nuevo producto
      description: |
        Crea un nuevo producto en el inventario.
        
        ### Validaciones
        - Nombre: Requerido, m√°ximo 100 caracteres
        - Descripci√≥n: Opcional, m√°ximo 500 caracteres
        - Precio: Requerido, mayor a 0
        - Cantidad: Requerido, mayor o igual a 0
        
        ### Permisos Requeridos
        - **ADMIN**: Crear productos
        - **USER**: Crear productos (limitado)
      tags:
        - Products
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProductRequest'
            example:
              name: "Tornillo M8x20"
              description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal"
              price: 0.50
              quantity: 1000
      responses:
        '201':
          description: ‚úÖ Producto creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
              example:
                success: true
                message: "Producto creado exitosamente"
                data:
                  id: 1
                  name: "Tornillo M8x20"
                  description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal"
                  price: 0.50
                  quantity: 1000
                  created_at: "2024-01-15T10:30:00.000Z"
                  updated_at: "2024-01-15T10:30:00.000Z"
                timestamp: "2024-01-15T10:30:00.000Z"
        '400':
          description: ‚ùå Datos de entrada inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
              example:
                success: false
                message: "Datos de entrada inv√°lidos"
                error: "VALIDATION_ERROR"
                details:
                  - field: "name"
                    message: "El nombre es requerido"
                  - field: "price"
                    message: "El precio debe ser mayor a 0"
                timestamp: "2024-01-15T10:30:00.000Z"
        '401':
          description: ‚ùå No autorizado - Token requerido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: ‚ùå Acceso denegado - Permisos insuficientes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /products/{id}:
    get:
      summary: üîç Obtener producto por ID
      description: |
        Obtiene los detalles completos de un producto espec√≠fico por su ID.
        
        ### Informaci√≥n Incluida
        - Datos b√°sicos del producto
        - Historial de modificaciones
        - Estado actual del inventario
        
        ### Permisos Requeridos
        - **ADMIN**: Acceso completo
        - **USER**: Acceso de lectura
        - **VIEWER**: Solo lectura
      tags:
        - Products
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID √∫nico del producto
          required: true
          schema:
            type: integer
            minimum: 1
          example: 1
      responses:
        '200':
          description: ‚úÖ Producto encontrado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
              example:
                success: true
                message: "Producto encontrado exitosamente"
                data:
                  id: 1
                  name: "Tornillo M8x20"
                  description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal"
                  price: 0.50
                  quantity: 1000
                  created_at: "2024-01-15T10:30:00.000Z"
                  updated_at: "2024-01-15T10:30:00.000Z"
                timestamp: "2024-01-15T10:30:00.000Z"
        '404':
          description: ‚ùå Producto no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "Producto con ID 1 no encontrado"
                error: "NOT_FOUND"
                timestamp: "2024-01-15T10:30:00.000Z"
        '401':
          description: ‚ùå No autorizado - Token requerido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse"

    put:
      summary: ‚úèÔ∏è Actualizar producto
      description: |
        Actualiza los datos de un producto existente.
        
        ### Caracter√≠sticas
        - Actualizaci√≥n parcial permitida
        - Validaci√≥n de datos en tiempo real
        - Historial de cambios autom√°tico
        
        ### Permisos Requeridos
        - **ADMIN**: Actualizar cualquier producto
        - **USER**: Actualizar productos (limitado)
      tags:
        - Products
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID √∫nico del producto a actualizar
          required: true
          schema:
            type: integer
            minimum: 1
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProductRequest'
            example:
              name: "Tornillo M8x20 Mejorado"
              description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal con recubrimiento anticorrosivo"
              price: 0.75
              quantity: 1500
      responses:
        '200':
          description: ‚úÖ Producto actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResponse'
              example:
                success: true
                message: "Producto actualizado exitosamente"
                data:
                  id: 1
                  name: "Tornillo M8x20 Mejorado"
                  description: "Tornillo m√©trico 8mm x 20mm cabeza hexagonal con recubrimiento anticorrosivo"
                  price: 0.75
                  quantity: 1500
                  created_at: "2024-01-15T10:30:00.000Z"
                  updated_at: "2024-01-15T11:45:00.000Z"
                timestamp: "2024-01-15T11:45:00.000Z"
        '400':
          description: ‚ùå Datos de entrada inv√°lidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
        '404':
          description: ‚ùå Producto no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ‚ùå No autorizado - Token requerido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse"
        '403':
          description: ‚ùå Acceso denegado - Permisos insuficientes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse"

    delete:
      summary: üóëÔ∏è Eliminar producto
      description: |
        Elimina permanentemente un producto del inventario.
        
        ‚ö†Ô∏è **ADVERTENCIA**: Esta acci√≥n es irreversible y eliminar√° permanentemente el producto.
        
        ### Permisos Requeridos
        - **ADMIN**: Eliminar cualquier producto
        - **USER**: No puede eliminar productos
      tags:
        - Products
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID √∫nico del producto a eliminar
          required: true
          schema:
            type: integer
            minimum: 1
          example: 1
      responses:
        '200':
          description: ‚úÖ Producto eliminado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteResponse'
              example:
                success: true
                message: "Producto eliminado exitosamente"
                data:
                  id: 1
                  deleted_at: "2024-01-15T12:00:00.000Z"
                timestamp: "2024-01-15T12:00:00.000Z"
        '404':
          description: ‚ùå Producto no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "Producto con ID 1 no encontrado"
                error: "NOT_FOUND"
                timestamp: "2024-01-15T12:00:00.000Z"
        '401':
          description: ‚ùå No autorizado - Token requerido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse"
        '403':
          description: ‚ùå Acceso denegado - Permisos insuficientes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse"